<!DOCTYPE html>
<html>
	<head>
		<title></title>

		<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
		<meta charset="utf-8">

		<!-- iPad/iPhone specific css below, add after your main css >
		<link rel="stylesheet" media="only screen and (max-device-width: 1024px)" href="ipad.css" type="text/css" />
		<link rel="stylesheet" media="only screen and (max-device-width: 480px)" href="iphone.css" type="text/css" />
		-->
		<link rel="stylesheet" href="js/jquery.mobile-1.2.0.min.css" type="text/css" />
		<link rel="stylesheet" href="css/iphone.css" type="text/css" />
		<link rel="stylesheet" href="css/android.css" type="text/css" />
		<link rel="stylesheet" href="css/validate.css" type="text/css" />

		<script type="text/javascript" charset="utf-8" src="js/jquery-1.8.2.min.js"></script>
		<script type="text/javascript" charset="utf-8" src="js/base64.js"></script>
		<script type="text/javascript" charset="utf-8" src="js/aes.js"></script>
		<script type="text/javascript" charset="utf-8" src="js/cordova.js"></script>
		<script type="text/javascript" charset="utf-8" src="js/main.js"></script>
		<script type="text/javascript" charset="utf-8" src="js/ajaxzip3.js"></script>
		<script src="js/spin.min.js" type="text/javascript"></script>

		<script type="text/javascript">
			$(document).ready(function() {
				document.addEventListener("deviceready", onDeviceReady, false);
			});

			function onDeviceReady() {
				
				$.ajaxSetup({
					timeout: 5000
				});

				document.addEventListener("menubutton", function() {
					window.location.href = 'setting.html';
				}, false);

				// GETでJSON取得
				//var get = getQuery();
				var params = getLocalStorage('params');
				var get = {
					params : params
				}
				console.log("params: " + JSON.stringify(get.params));

				var hash = JSON.parse(get.params);

				var area_name = hash.recipient_pref;
				var qr_id = hash.qr_id;
				var order_id = hash.order_id;
				var item_version = hash.item_version;
				var latitude = hash.order_latitude;
				var longitude = hash.order_longitude;

				setLocalStorage('qr_id', String(qr_id));
				setLocalStorage('order_latitude', String(latitude));
				setLocalStorage('order_longitude', String(longitude));
				window.location.href = 'show_item.html';
				//window.location.href = 'show_item.html?qr_id=' + String(qr_id) + '&latitude=' + String(latitude) + '&longitude=' + String(longitude);

			}

		</script>

	</head>

	<body>
		<div data-role="page" data-add-back-btn="false" data-theme="z">
			<div data-role="header" id="header" data-position="fixed">
				<h1></h1>
			</div>
			<!-- loading -->
			<div class="loading" data-role="content" id="loading">
				<div class="loading_box">
					<p>
						しばらくおまちください
					</p>
					<div id="loadingImg" class="square"></div>
					<script>
						// spin setting
						var opts = {
							lines : 15, // The number of lines to draw
							length : 28, // The length of each line
							width : 5, // The line thickness
							radius : 14, // The radius of the inner circle
							corners : 1, // Corner roundness (0..1)
							rotate : 0, // The rotation offset
							color : '#fff', // #rgb or #rrggbb
							speed : 1, // Rounds per second
							trail : 60, // Afterglow percentage
							shadow : false, // Whether to render a shadow
							hwaccel : false, // Whether to use hardware acceleration
							className : 'spinner', // The CSS class to assign to the spinner
							zIndex : 2e9//, // The z-index (defaults to 2000000000)
						//	top : 'auto', // Top position relative to parent in px
						//	left : 'auto' // Left position relative to parent in px
						};
						var target = document.getElementById('loadingImg');
						var spinner = new Spinner(opts).spin(target);
					</script>
				</div>
			</div>
		</div>
	</body>
</html>

